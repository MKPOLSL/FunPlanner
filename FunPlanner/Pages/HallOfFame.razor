@page "/hall-of-fame"
@using System.Net.Http.Json
@using FunPlannerShared.Controllers
@using FunPlannerShared.Data.Entities
@inject IPersonController personController
@inject HttpClient httpClient

<h3>Koledzy z pracy</h3>

<MudTable Items="@Elements.Take(4)" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@loading" LoadingProgressColor="Color.Info">
    <HeaderContent>
        <MudTh>Użytkownik</MudTh>
        <MudTh>Punkty</MudTh>
        <MudTh>Liczba utworzonych wydarzeń</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.FirstName @context.LastName</MudTd>
        <MudTd DataLabel="Points">@context.Points</MudTd>
        <MudTd DataLabel="EventsCounter">@context.CreatedEvents?.Count()</MudTd>
        @*<MudTd DataLabel="Position" HideSmall="_hidePosition">@context.Position</MudTd>
        <MudTd DataLabel="Molar mass">@context.Molar</MudTd>*@
    </RowTemplate>
</MudTable>

<MudSwitch @bind-Checked="loading">Show Loading</MudSwitch>

@code {
    private bool loading = true;
    private ICollection<Person> Elements = new List<Person>();

    protected override async Task OnInitializedAsync()
    {
        Elements = await personController.Get();
        loading = false;
    }
}